--- Integration Webhooks.blueprint.json ---
Name: Integration Webhooks
ID: 14, Module: gateway:CustomWebHook
Mapper: {}
ID: 5, Module: google-sheets:addRow
Mapper: {"from": "drive", "mode": "select", "values": {"0": "{{now}}", "1": "{{14.restaurant}}", "2": "{{14.contact}}", "3": "{{14.location}}", "4": "{{14.foodType}}", "5": "{{14.quantity}}", "6": "{{14.expiry}}", "7": "Pending", "8": "Not yet Assigned", "10": "{{14.email}}", "11": "{{random}}"}, "sheetId": "DonationRequests", "spreadsheetId": "/1P-4JXAUuDC4LTkGwc6FEOCPgRjjHI1XH_QXUvi6rjWE", "includesHeaders": true, "insertDataOption": "INSERT_ROWS", "useColumnHeaders": false, "valueInputOption": "USER_ENTERED", "insertUnformatted": false}
ID: 8, Module: google-sheets:filterRows
Mapper: {"from": "drive", "limit": "1", "filter": [[{"a": "C", "b": "{{14.location}}", "o": "text:equal"}]], "sheetId": "NGOregistry", "sortOrder": "asc", "spreadsheetId": "1P-4JXAUuDC4LTkGwc6FEOCPgRjjHI1XH_QXUvi6rjWE", "tableFirstRow": "A1:CZ1", "includesHeaders": true, "valueRenderOption": "FORMATTED_VALUE", "dateTimeRenderOption": "FORMATTED_STRING"}
ID: 10, Module: google-email:sendAnEmail
Mapper: {"to": ["{{8.`5`}}"], "content": "<div style=\"font-family: Inter, Arial, sans-serif; background:#f3f4f6; padding:25px;\">\r\n  <div style=\"max-width:650px; margin:auto; background:white; border-radius:14px;\r\n              box-shadow:0 6px 20px rgba(0,0,0,0.1); overflow:hidden;\">\r\n\r\n    <!-- HEADER -->\r\n    <div style=\"background:linear-gradient(135deg,#14532d,#16a34a);\r\n                padding:20px; color:white; text-align:center;\">\r\n      <h1 style=\"margin:0; font-size:34px; font-weight:700;\">\r\n        üç≤SURA\r\n      </h1>\r\n      <p style=\"margin:6px 0 0; font-size:14px; opacity:0.9;\">\r\n        Automated Surplus Food Redistribution Alert\r\n      </p>\r\n    </div>\r\n\r\n    <!-- BODY -->\r\n    <div style=\"padding:22px; color:#111827;\">\r\n      <p style=\"font-size:15px; margin:0 0 12px;\">\r\n        Hello <b style=\"color:#166534;\">{{8.`1`}}</b>,\r\n      </p>\r\n\r\n      <p style=\"font-size:13px; line-height:1.6; color:#374151; margin:0 0 14px;\">\r\n        A new food donation request has been submitted by a restaurant near you.\r\n        Your NGO has been selected as the first responder.\r\n      </p>\r\n\r\n      <!-- DETAILS CARD -->\r\n      <div style=\"margin:18px 0; padding:18px; border-radius:12px;\r\n                  background:#f9fafb; border:1px solid #e5e7eb;\">\r\n        <h2 style=\"margin:0 0 12px; font-size:15px; color:#14532d;\">\r\n          üìå Donation Request Details\r\n        </h2>\r\n\r\n        <table style=\"width:100%; font-size:13px; border-collapse:collapse;\">\r\n          <tr><td style=\"padding:6px 0; color:#6b7280;\">üç¥ Restaurant</td><td style=\"padding:6px 0; font-weight:600;\">{{14.restaurant}}</td></tr>\r\n          <tr><td style=\"padding:6px 0; color:#6b7280;\">üìû Contact</td><td style=\"padding:6px 0; font-weight:600;\">{{14.contact}}</td></tr>\r\n          <tr><td style=\"padding:6px 0; color:#6b7280;\">üìç Location</td><td style=\"padding:6px 0; font-weight:600;\">{{14.location}}</td></tr>\r\n          <tr><td style=\"padding:6px 0; color:#6b7280;\">ü•ó Food Type</td><td style=\"padding:6px 0; font-weight:600;\">{{14.foodType}}</td></tr>\r\n          <tr><td style=\"padding:6px 0; color:#6b7280;\">üë• Quantity</td><td style=\"padding:6px 0; font-weight:600;\">{{14.quantity}} meals</td></tr>\r\n          <tr><td style=\"padding:6px 0; color:#6b7280;\">‚è≥ Pickup Window</td><td style=\"padding:6px 0; font-weight:600;\">{{14.expiry}}</td></tr>\r\n          <tr><td style=\"padding:6px 0; color:#6b7280;\">üìù Notes</td><td style=\"padding:6px 0; font-weight:600;\">{{14.notes}}</td></tr>\r\n        </table>\r\n\r\n        <!-- URGENCY -->\r\n        <div style=\"margin-top:12px; padding:10px;\r\n                    border-radius:10px; background:#fff7ed;\r\n                    border:1px solid #fdba74; color:#9a3412;\r\n                    font-size:12px; font-weight:600;\">\r\n          ‚ö† Quick Response Needed: Food must be collected within the time window.\r\n        </div>\r\n      </div>\r\n\r\n      <!-- ACTION BUTTONS -->\r\n      <h3 style=\"font-size:14px; margin:8px 0; color:#111827;\">\r\n        Please confirm your decision:\r\n      </h3>\r\n\r\n      <!-- BUTTONS -->\r\n      <table role=\"presentation\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\"\r\n             align=\"center\" style=\"margin:18px auto;\">\r\n        <tr>\r\n          <!-- ACCEPT BUTTON -->\r\n          <td align=\"center\" bgcolor=\"#16a34a\"\r\n              style=\"border-radius:10px; padding:12px 28px;\">\r\n            <a href=\"https://hook.eu1.make.com/1cn5utw1vm9lxkcu8tmp454far2y1gco?decision=accept&requestId= {{5.rowNumber}}\"\r\n               style=\"color:#ffffff;\r\n                      font-family:Arial,sans-serif;\r\n                      font-size:14px;\r\n                      font-weight:700;\r\n                      text-decoration:none;\r\n                      display:block;\">\r\n              ‚úÖ Accept Pickup\r\n            </a>\r\n          </td>\r\n\r\n          <td style=\"width:12px;\"></td>\r\n\r\n          <!-- DECLINE BUTTON -->\r\n          <td align=\"center\" bgcolor=\"#dc2626\"\r\n              style=\"border-radius:10px; padding:12px 28px;\">\r\n            <a href=\"https://hook.eu1.make.com/1cn5utw1vm9lxkcu8tmp454far2y1gco?decision=decline&requestId= {{5.rowNumber}}\"\r\n               style=\"color:#ffffff;\r\n                      font-family:Arial,sans-serif;\r\n                      font-size:14px;\r\n                      font-weight:700;\r\n                      text-decoration:none;\r\n                      display:block;\">\r\n              ‚ùå Decline Request\r\n            </a>\r\n          </td>\r\n        </tr>\r\n      </table>\r\n\r\n      <!-- FOOTNOTE -->\r\n      <p style=\"font-size:12px; color:#6b7280; line-height:1.5; margin:0 0 12px;\">\r\n        If no response is received within the deadline,\r\n        the request will automatically be forwarded to the next available NGO.\r\n      </p>\r\n\r\n      <p style=\"margin-top:18px; font-size:13px;\">\r\n        Regards,<br>\r\n        <b style=\"color:#14532d;\">SURA</b> ü§ñ\r\n      </p>\r\n    </div>\r\n\r\n    <!-- FOOTER -->\r\n    <div style=\"background:#111827; padding:12px; text-align:center;\r\n                font-size:11px; color:#d1d5db;\">\r\n      ¬© 2026 SURA Connect ‚Ä¢ Automation for Social Good\r\n      <br>\r\n      Built for reducing food waste & improving NGO coordination\r\n    </div>\r\n  </div>\r\n</div>", "subject": "New Food Donation Request Assigned", "bodyType": "rawHtml"}
ID: 12, Module: google-sheets:updateRow
Mapper: {"from": "drive", "mode": "select", "values": {"0": "{{now}}", "7": "Waiting for Response", "8": "{{8.`5`}}", "9": "{{8.`1`}}", "10": "{{14.email}}"}, "sheetId": "DonationRequests", "rowNumber": "{{5.rowNumber}}", "spreadsheetId": "/1P-4JXAUuDC4LTkGwc6FEOCPgRjjHI1XH_QXUvi6rjWE", "includesHeaders": true, "useColumnHeaders": false, "valueInputOption": "USER_ENTERED"}
====================
--- NGOresponse Handler.blueprint.json ---
Name: NGOresponse Handler
ID: 2, Module: gateway:CustomWebHook
Mapper: {}
ID: 8, Module: google-sheets:filterRows
Mapper: {"from": "drive", "limit": "1", "filter": [[{"a": "L", "b": "{{2.requestId}}", "o": "text:equal"}], [{"a": "L", "b": "{{2.requestId}}", "o": "text:notequal"}]], "sheetId": "DonationRequests", "sortOrder": "asc", "spreadsheetId": "1P-4JXAUuDC4LTkGwc6FEOCPgRjjHI1XH_QXUvi6rjWE", "tableFirstRow": "A1:CZ1", "includesHeaders": true, "valueRenderOption": "FORMATTED_VALUE", "dateTimeRenderOption": "FORMATTED_STRING"}
ID: 32, Module: builtin:BasicRouter
Mapper: null
Route 0 filter: null
  ID: 37, Module: google-sheets:updateRow
  Mapper: {"from": "drive", "mode": "select", "values": {"Status": "\"Accepted\"", "NGOAssigned": "{{8.`9`}}"}, "sheetId": "DonationRequests", "rowNumber": "{{8.`__ROW_NUMBER__`}}", "spreadsheetId": "/1P-4JXAUuDC4LTkGwc6FEOCPgRjjHI1XH_QXUvi6rjWE", "includesHeaders": true, "useColumnHeaders": true, "valueInputOption": "USER_ENTERED"}
  ID: 25, Module: google-email:sendAnEmail
  Mapper: {"to": ["{{8.`10`}}"], "subject": "Update on your Food Donation Request :{{2.requestId}}", "bodyType": "collection", "contents": [{"text": "SURA Connect ‚Äì Donation Status Update\r\n\r\nHello {{8.`1`}} ,\r\n\r\nYour food donation request (ID: {{2.requestId}}) has been {{2.decision}} by the NGO.\r\n\r\nNGO Details:\r\n‚Ä¢ NGO Name: {{8.`9`}}\r\n‚Ä¢ Location: {{8.`3`}}\n‚Ä¢ Food Type: {{8.`4`}}\r\n‚Ä¢ Quantity:  {{8.`5`}} meals\r\n‚Ä¢ Pickup Window: {{8.`6`}}\r\n\r\n{{if(2.decision = \"accept\"; \"The NGO will contact you shortly for pickup coordination.\"; \"The request will now be forwarded to the next available NGO.\")}}\r\n\r\nThank you for reducing food waste.\r\n\r\n‚Äì SURA Connect\r\n", "image": {}}]}
  Filter: {"name": "Accept Route", "conditions": [[{"a": "{{2.decision}}", "b": "accept", "o": "text:equal"}]]}
Route 1 filter: null
  ID: 26, Module: google-sheets:updateRow
  Mapper: {"from": "drive", "mode": "select", "values": {"7": "Declined", "9": "Declined by the NGO {{8.`9`}}"}, "sheetId": "DonationRequests", "rowNumber": "{{8.`__ROW_NUMBER__`}}", "spreadsheetId": "/1P-4JXAUuDC4LTkGwc6FEOCPgRjjHI1XH_QXUvi6rjWE", "includesHeaders": true, "useColumnHeaders": false, "valueInputOption": "USER_ENTERED"}
  Filter: {"name": "Decline Route", "conditions": [[{"a": "{{2.decision}}", "b": "decline", "o": "text:equal"}]]}
  ID: 28, Module: google-sheets:filterRows
  Mapper: {"from": "drive", "limit": "1", "filter": [[{"a": "C", "b": "{{8.`3`}}", "o": "text:equal"}, {"a": "F", "b": "{{8.`8`}}", "o": "text:notequal"}]], "sheetId": "NGOregistry", "sortOrder": "asc", "spreadsheetId": "1P-4JXAUuDC4LTkGwc6FEOCPgRjjHI1XH_QXUvi6rjWE", "tableFirstRow": "A1:CZ1", "includesHeaders": true, "valueRenderOption": "FORMATTED_VALUE", "dateTimeRenderOption": "FORMATTED_STRING"}
  ID: 30, Module: google-email:sendAnEmail
  Mapper: {"to": "{{8.`10`}}", "subject": "New Food Donation Request - Please Respond", "bodyType": "collection", "contents": [{"text": "Hello,\r\n\r\nA food donation request is available for pickup.\r\n\r\nRestaurant: {{8.`1`}} \nLocation: {{8.`3`}}\r\nFood Type: {{8.`4`}}\r\nQuantity: {{8.`5`}}\r\nPickup Window: {{8.`6`}}\r\n\r\nIf you are available to collect this donation, please respond through the system.\r\n\r\nThank you.\r\n", "image": {}}]}
====================
